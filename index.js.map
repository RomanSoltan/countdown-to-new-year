{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["const countdownEls = document.querySelectorAll(\".countdown\");\ncountdownEls.forEach(countdownEl => createCountdown(countdownEl));\n\nfunction createCountdown(countdownEl) {\n  const target = new Date(new Date(countdownEl.dataset.targetDate).toLocaleString('en', ));\n  const parts = {\n    days: {text: [\"days\", \"day\"], dots: 30},\n    hours: {text: [\"hours\", \"hour\"], dots: 24},\n    minutes: {text: [\"minutes\", \"minute\"], dots: 60},\n    seconds: {text: [\"seconds\", \"second\"], dots: 60},\n  }\n\n  Object.entries(parts).forEach(([key, value]) => {\n    const partEl = document.createElement(\"div\");\n    partEl.classList.add(\"part\", key);\n    partEl.style.setProperty(\"--dots\", value.dots);\n    value.element = partEl;\n\n    const remainingEl = document.createElement(\"div\");\n    remainingEl.classList.add(\"remaining\");\n    remainingEl.innerHTML = `\n      <span class=\"number\"></span>\n      <span class=\"text\"></span>\n    `\n    partEl.append(remainingEl);\n    for (let i = 0; i < value.dots; i++) {\n      const dotContainerEl = document.createElement(\"div\");\n      dotContainerEl.style.setProperty(\"--dot-idx\", i);\n      dotContainerEl.classList.add(\"dot-container\");\n      const dotEl = document.createElement(\"div\");\n      dotEl.classList.add(\"dot\");\n      dotContainerEl.append(dotEl);\n      partEl.append(dotContainerEl);\n    }\n    countdownEl.append(partEl);\n  });\n  getRemainingTime(target, parts);\n}\n\nfunction getRemainingTime(target, parts, first=true) {\n  const now = new Date();\n\n  if (first) console.log({target, now})\n  const remaining = {};\n  let seconds = Math.floor((target - (now)) / 1000);\n  let minutes = Math.floor(seconds / 60);\n  let hours = Math.floor(minutes / 60);\n  let days = Math.floor(hours / 24);\n\n  hours = hours - (days * 24);\n  minutes = minutes - (days * 24 * 60) - (hours * 60);\n  seconds = seconds - (days * 24 * 60 * 60) - (hours * 60 * 60) - (minutes * 60);\n  Object.entries({ days, hours, minutes, seconds }).forEach(([key, value]) => {\n    const remaining = parts[key].element.querySelector(\".number\");\n    const text = parts[key].element.querySelector(\".text\");\n    remaining.innerText = value;\n    text.innerText = parts[key].text[Number(value===1)];\n    const dots = parts[key].element.querySelectorAll(\".dot\");\n    dots.forEach((dot, idx) => {\n      dot.dataset.active = idx <= value;\n      dot.dataset.lastactive = idx == value;\n    });\n  });\n  if (now <= target) {\n    window.requestAnimationFrame(() => {\n      getRemainingTime(target, parts, false);\n    });\n  }\n}"],"names":["countdownEls","countdownEl","createCountdown","target","parts","key","value","partEl","remainingEl","dotContainerEl","dotEl","getRemainingTime","first","now","seconds","minutes","hours","days","remaining","text","dot","idx"],"mappings":"ssBAAA,MAAMA,EAAe,SAAS,iBAAiB,YAAY,EAC3DA,EAAa,QAAQC,GAAeC,EAAgBD,CAAW,CAAC,EAEhE,SAASC,EAAgBD,EAAa,CACpC,MAAME,EAAS,IAAI,KAAK,IAAI,KAAKF,EAAY,QAAQ,UAAU,EAAE,eAAe,IAAO,CAAA,EACjFG,EAAQ,CACZ,KAAM,CAAC,KAAM,CAAC,OAAQ,KAAK,EAAG,KAAM,EAAE,EACtC,MAAO,CAAC,KAAM,CAAC,QAAS,MAAM,EAAG,KAAM,EAAE,EACzC,QAAS,CAAC,KAAM,CAAC,UAAW,QAAQ,EAAG,KAAM,EAAE,EAC/C,QAAS,CAAC,KAAM,CAAC,UAAW,QAAQ,EAAG,KAAM,EAAE,CAChD,EAED,OAAO,QAAQA,CAAK,EAAE,QAAQ,CAAC,CAACC,EAAKC,CAAK,IAAM,CAC9C,MAAMC,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,UAAU,IAAI,OAAQF,CAAG,EAChCE,EAAO,MAAM,YAAY,SAAUD,EAAM,IAAI,EAC7CA,EAAM,QAAUC,EAEhB,MAAMC,EAAc,SAAS,cAAc,KAAK,EAChDA,EAAY,UAAU,IAAI,WAAW,EACrCA,EAAY,UAAY;AAAA;AAAA;AAAA,MAIxBD,EAAO,OAAOC,CAAW,EACzB,QAAS,EAAI,EAAG,EAAIF,EAAM,KAAM,IAAK,CACnC,MAAMG,EAAiB,SAAS,cAAc,KAAK,EACnDA,EAAe,MAAM,YAAY,YAAa,CAAC,EAC/CA,EAAe,UAAU,IAAI,eAAe,EAC5C,MAAMC,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,UAAU,IAAI,KAAK,EACzBD,EAAe,OAAOC,CAAK,EAC3BH,EAAO,OAAOE,CAAc,CAC7B,CACDR,EAAY,OAAOM,CAAM,CAC7B,CAAG,EACDI,EAAiBR,EAAQC,CAAK,CAChC,CAEA,SAASO,EAAiBR,EAAQC,EAAOQ,EAAM,GAAM,CACnD,MAAMC,EAAM,IAAI,KAEZD,GAAO,QAAQ,IAAI,CAAC,OAAAT,EAAQ,IAAAU,CAAG,CAAC,EAEpC,IAAIC,EAAU,KAAK,OAAOX,EAAUU,GAAQ,GAAI,EAC5CE,EAAU,KAAK,MAAMD,EAAU,EAAE,EACjCE,EAAQ,KAAK,MAAMD,EAAU,EAAE,EAC/BE,EAAO,KAAK,MAAMD,EAAQ,EAAE,EAEhCA,EAAQA,EAASC,EAAO,GACxBF,EAAUA,EAAWE,EAAO,GAAK,GAAOD,EAAQ,GAChDF,EAAUA,EAAWG,EAAO,GAAK,GAAK,GAAOD,EAAQ,GAAK,GAAOD,EAAU,GAC3E,OAAO,QAAQ,CAAE,KAAAE,EAAM,MAAAD,EAAO,QAAAD,EAAS,QAAAD,CAAS,CAAA,EAAE,QAAQ,CAAC,CAACT,EAAKC,CAAK,IAAM,CAC1E,MAAMY,EAAYd,EAAMC,CAAG,EAAE,QAAQ,cAAc,SAAS,EACtDc,EAAOf,EAAMC,CAAG,EAAE,QAAQ,cAAc,OAAO,EACrDa,EAAU,UAAYZ,EACtBa,EAAK,UAAYf,EAAMC,CAAG,EAAE,KAAK,EAAOC,IAAQ,EAAE,EACrCF,EAAMC,CAAG,EAAE,QAAQ,iBAAiB,MAAM,EAClD,QAAQ,CAACe,EAAKC,IAAQ,CACzBD,EAAI,QAAQ,OAASC,GAAOf,EAC5Bc,EAAI,QAAQ,WAAaC,GAAOf,CACtC,CAAK,CACL,CAAG,EACGO,GAAOV,GACT,OAAO,sBAAsB,IAAM,CACjCQ,EAAiBR,EAAQC,EAAO,EAAK,CAC3C,CAAK,CAEL"}